var ER={};ER.utils=new function(){return{prepareParam:function(e){var t="";for(var n in e){var r=e[n];t+=n+"="+encodeURIComponent(r)+";"}return t},getParam:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];for(var i in r)if(t==i)return r[i]}}}},ER.prevPage=new function(){var e=function(e){if("string"!=typeof e||0===e.length)return"";var t=e.match(/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i);return t=null===t?"":t[1]},t=function(t){if(0!==t.length){var n=t[0],r=e(document.referrer);r.length>0&&(n[EVENT_PARAM_PREVIOUS_DOMAIN]=r)}},n=function(){var t=e(window.location.href),n=e(document.referrer);return-1===t.indexOf(n)||-1===n.indexOf(t)?!0:!1};return{eventWrapper:function(e,r){if(n()!==!1)if(e.length>0)for(var i=0;i<e.length;i++){var o=e[i];"undefined"!=typeof o&&t(o)}else r.length>0&&t(r)}}},ER.uidFill=new function(){var e=function(e,n){if(e.length>0)for(var r=0;r<e.length;r++){var i=e[r];if("undefined"!=typeof i)return t(i,EVENT_PARAM_UID)}else if(n.length>0)return t(n,EVENT_PARAM_UID)},t=function(e,t){return 0===e.length?void 0:e[0][t]},n=function(){return ER.erCookieObj.getLocalCookie(ER_EVENT_UID)},r=function(e){ER.erCookieObj.setLocalCookie(ER_EVENT_UID,e,365)},i=function(e,t){if(0!==e.length){var n=e[0],r=n[EVENT_PARAM_UID];("undefined"==typeof r||r.length<=0)&&(n[EVENT_PARAM_UID]=t)}},o=function(e){return"undefined"!=typeof e&&e.length>0},a=function(e,t,n){if(e.length>0)for(var r in e)if(e[r].length>0)for(var i in e[r])e[r][i].lo=n;else e[r].lo=n;if(t.length>0)for(var o in t)t[o].lo=n};return{eventWrapper:function(t,u){var l=e(t,u),d=0;if(o(l))d=1;else if(l=n(),o(l))if(t.length>0)for(var f=0;f<t.length;f++){var c=t[f];"undefined"!=typeof c&&i(c,l)}else u.length>0&&i(u,l);r(l),a(t,u,d.toString())}}},ER.erCookieObj=new function(){var e=0,t=864e5,n=6e4,r=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var i=n[r].trim();if(0===i.indexOf(t))return i.substring(t.length)}return""},i=function(r,i,o){e=r===ERSSID_COOKIE?n:t;var a="";if(o){var u=new Date;u.setTime(u.getTime()+o*e),a=";expires="+u.toGMTString()}document.cookie=r+"="+i+a+"; path=/"};return{getLocalCookie:function(e){return r(e)},setLocalCookie:function(e,t,n){i(e,t,n)}}},ER.queryObj=new function(){function e(e){var t=e.cid,n=e.type,r=e.act||"view";return t&&n&&r&&("user"===n||"rank"===n||"item"===n)&&(e.logicid=t+"_"+n+"_"+r,e.type=c,delete e.cid,delete e.act),e}function t(e){return"undefined"==typeof e.group||"undefined"==typeof e.logicid?!0:(e.type&&"layout"===e.type||(e.type=c),!1)}function n(e){var t=ER.lastView.getLastViewedItemFromCookie();return!e.lastviewed&&t&&t.length>0&&(e.lastviewed=t),e}var r="",i="",o="",a="",u={},l=0,d=window.etuRecQueryCallBack,f=null,c="list",s=function(e,t,n,r){try{e.insertRule?e.insertRule(t+" {"+n+"}",r):e.addRule&&e.addRule(t,n,r)}catch(i){}},p=function(e,t){null!==f&&(t=f);var n="etu-recommender-style",r=document.createElement("style");r.type="text/css",r.id=n;var i=document.getElementById(n);null===i?document.getElementsByTagName("head")[0].appendChild(r):document.getElementsByTagName("head")[0].replaceChild(r,i);var o=document.styleSheets[document.styleSheets.length-1],a="etu-recommender-"+t.loname,u=document.getElementById(a);if(null===u){u=document.createElement("div"),u.id=a;var l=document.body.lastElementChild;l.parentNode.insertBefore(u,l)}for(;u.firstChild;)u.removeChild(u.firstChild);var d="font-size:"+t.lo_fontsize+"px;overflow:auto;max-width:"+(t.lo_item_w+t.lo_item_mg)*t.lo_col+"px;background-color:"+t.lo_bgcolor+";color:"+t.lo_fgcolor+";";s(o,"#"+a,d,0);var c="etu-recommender-header",p=document.createElement("div");p.className=c,void 0!==p.textContent?p.textContent=t.lo_tt_text:p.innerText=t.lo_tt_text,u.appendChild(p);var v="text-align:"+t.lo_tt_align+";margin:"+t.lo_item_mg/2+"px;";s(o,"."+c,v,1);var E="etu-recommender-content",g=document.createElement("div");g.className=E,u.appendChild(g);for(var m="etu-recommender-item",_=e.length<t.lo_item_cnt?e.length:t.lo_item_cnt,h=0;_>h;h++)try{var y=e[h],R=document.createElement("div");R.className=m,g.appendChild(R);var O=document.createElement("a"),C=y.detail_url.indexOf("?")>=0?"&":"?";O.href=y.detail_url+C+"eturec="+(h+1)+"&etulogic="+t.loname,void 0!==t.eturefkey&&(O.href+="&eturefkey="+t.eturefkey),R.appendChild(O);var w=document.createElement("img");w.src=y.img_url,O.appendChild(w);var T=document.createElement("p");void 0!==T.textContent?T.textContent=y.pname:T.innerText=y.pname,O.appendChild(T)}catch(I){}var A="width:"+t.lo_item_w+"px;margin:"+t.lo_item_mg/2+"px;display:inline-block;vertical-align:top;";s(o,"."+m,A,2);var q="width:"+t.lo_item_w+"px;height:"+t.lo_item_h+"px;";s(o,"."+m+" img",q,3);var k="text-align:center;";s(o,"."+m+" p",k,4)};window.etuRecQueryCallBack=function(e,t,n){"layout"===e.type&&void 0!==t&&void 0!==n&&(p(t,n),t=t.map(function(e){return e.pid}));var r;if("function"==typeof u[e.qqueryid])r=u[e.qqueryid];else{if("function"!=typeof d)return;r=d}r.length>1?r(e,t):r(t)};var v=function(o){if(0!==o.length){var a=e(o[0]);if(!t(a)){a=n(a),"function"==typeof a.callback&&(void 0===a.qqueryid&&(a.qqueryid="erquery_"+l),u[a.qqueryid]=a.callback,l++,a.callback=null);var d=ER.utils.prepareParam(a);d=d.replace(new RegExp(";","g"),"&");var f=document.createElement("script");f.type="text/javascript",f.async=!0,f.src=i+"query.js?"+d+"&erUid="+r;var c=document.body.lastElementChild;c||(c=document.body.children[document.body.children.length-1]),c.parentNode.insertBefore(f,c)}}};return{init:function(e,t,n,u){r=e,i=t,a=n,o=u},setLayout:function(e){f=e},submit:function(){if(a.length>0)for(var e=0;e<a.length;e++){var t=a[e];"undefined"!=typeof t&&v(t)}else o.length>0&&v(o)}}},ER.eventObj=new function(){var e="",t="",n="",r="",i="",o=function(e,t){var n="",r=t+"=.+?&",i=t+"=",o=e.match(r);if(null!==o&&o.length>0){o=o[0];var n=o.substring(i.length,o.length-1);return n}var a=t+"=.+",o=e.match(a);if(null!==o&&o.length>0){o=o[0];var n=o.substring(i.length,o.length);return n}return n},a=function(e,t,n,r){var i=o(t,n);return r&&(i=decodeURIComponent(i)),null!==i&&i.length>0&&(e=e+";"+n+"="+i),e},u=function(e){if(0!==e.length){var t=e[0],n=ER.utils.prepareParam(t),r=encodeURI(window.location.href);n=a(n,r,"eturec"),n=a(n,r,"ercamp"),n=a(n,r,"erpage"),n=a(n,r,"etulogic"),n=a(n,r,"eturefkey"),n=a(n,r,"utm_source",!0),n=a(n,r,"utm_medium",!0),n=a(n,r,"utm_campaign",!0),n=a(n,r,"utm_term",!0),n=a(n,r,"utm_content",!0),i&&(n+=";ssid="+i);var o=document.referrer,u=decodeURI(o)==o?encodeURI(o):o;return n+=";preurl="+u}},l=function(t){var n=new Image,i=new Date,o=i.getTime();n.alt="",n.src=r+"action?;"+t+";erUid="+e+";"+o+";",n.onload=function(){n&&"number"==typeof n.width&&0===n.width}};return{init:function(o,a,u,l,d){e=o,r=a,t=l,n=u,i=d},submit:function(){if(n.length>0)for(var e=0;e<n.length;e++){var r=n[e];if("undefined"!=typeof r){var i=u(r);l(i)}}else t.length>0&&l(u(t))}}},ER.pTuple=function(){var e=function(e){for(var t="",r=0,i=e.length;i>r;r++)t=n(e[r].ptuple),t.length>0&&(e[r].ptuple=t)},t=function(t,n){t.length>0?t.map(function(t){e(t)}):n.length>0&&e(n)},n=function(e){var t="";return e&&(e.map(function(e){if(e.paypid&&!e.total){var t=e.qty?parseInt(e.qty):0,n=e.unit_price?parseFloat(e.unit_price):0;e.total=t>0&&n>0?(t*n).toString():"0"}}),t=JSON.stringify(e)),t};return{pTupleToJson:t}}(),ER.lastView=new function(){var e=365,t="",n=function(n){if(0!==n.length){var r=n[0];"undefined"!=typeof r.cid&&"undefined"!=typeof r.act&&"undefined"!=typeof r.pid&&"view"===r.act&&(t=r.pid),""!==t&&ER.erCookieObj.setLocalCookie(ER_LASTVIEW_COOKIE,t,e)}},r=function(){return ER.erCookieObj.getLocalCookie(ER_LASTVIEW_COOKIE)};return{saveLastViewItem:function(e,t){if(e.length>0)for(var r=0;r<e.length;r++){var i=e[r];"undefined"!=typeof i&&n(i)}else t.length>0&&n(t)},getLastViewedItemFromCookie:r}},ER.erTag=new function(){var e=function(){return ER.erCookieObj.getLocalCookie(ERTAG_FROM_COOKIE)},t=function(e,t){return ER.erCookieObj.setLocalCookie(ERTAG_FROM_COOKIE,e,t)},n=function(){return ER.erCookieObj.getLocalCookie(ERTAG_NOW_COOKIE)},r=function(e,t){return ER.erCookieObj.setLocalCookie(ERTAG_NOW_COOKIE,e,t)},i=function(e,t){return 0===e.length?void 0:e[0][t]},o=function(e,t){if(e.length>0)for(var n=0;n<e.length;n++){var r=e[n];if("undefined"!=typeof r)return i(r,EVENT_PARAM_ERTAG)}else if(t.length>0)return i(t,EVENT_PARAM_ERTAG)},a=function(e,t,n){if(0!==e.length){var r=e[0];delete r.erTag,"undefined"!=typeof t&&t.length>0&&(r[EVENT_PARAM_ERTAG_NOW]=t),"undefined"!=typeof n&&n.length>0&&(r[EVENT_PARAM_ERTAG_FROM]=n)}};return{eventWrapper:function(t,r){var i=e(),o=n();if(t.length>0)for(var u=0;u<t.length;u++){var l=t[u];"undefined"!=typeof l&&a(l,o,i)}else r.length>0&&a(r,o,i)},updateViewPath:function(i,a){var u=(e(),n()),l=o(i,a),d=365;if(!("undefined"==typeof l||l.length<=0))if("undefined"==typeof u||u.length<=0)r(l,d);else{if(l==u)return;r(l,d),t(u,d)}}}},CrxDomainStorage=new function(){var e="",t="",n=null,r=!1,i=[],o={},a=0,u=function(){if(r=!0,i.length){for(var e=0,t=i.length;t>e;e++)d(i[e]);i=[]}},l=function(t){var n=t.origin.replace(/(\/*$)/g,""),r=e.replace(/(\/*$)/g,"");if(n==r){var i=JSON.parse(t.data);o[i.id]&&(o[i.id].callback(i.key,i.value,i.ssid),delete o[i.id])}},d=function(t){o[t.request.id]=t,n.contentWindow.postMessage(JSON.stringify(t.request),e)};this.init=function(r,i){if(e=r,t=i,!n){if(!window.postMessage||!window.localStorage||"undefined"==typeof JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify)return!1;n=document.createElement("iframe"),n.style.cssText="position:absolute;width:1px;height:1px;left:-9999px;",n.src=e+t;var o=document.body.lastElementChild;o||(o=document.body.children[document.body.children.length-1]),o.parentNode.insertBefore(n,o),window.addEventListener?(n.addEventListener("load",function(){u()},!1),window.addEventListener("message",function(e){l(e)},!1)):n.attachEvent&&(n.attachEvent("onload",function(){u()},!1),window.attachEvent("onmessage",function(e){l(e)}))}return!0},this.requestValue=function(e,t,n){var o={key:e,id:++a,eruid:t},u={request:o,callback:n};r?d(u):i.push(u)}};var ERUID_COOKIE="__eruid",ER_LASTVIEW_COOKIE="__lastv",ERTAG_FROM_COOKIE="__etF",ERTAG_NOW_COOKIE="__etN",ER_EVENT_UID="__erEvntUid",ALG_LAST_ITEM_VIEW="last_item_views",TYPE_CROSS="cross",EVENT_PARAM_ERTAG="erTag",EVENT_PARAM_ERTAG_FROM="erTF",EVENT_PARAM_ERTAG_NOW="erTN",EVENT_PARAM_UID="uid",EVENT_PARAM_PREVIOUS_DOMAIN="preDN",ERSSID_COOKIE="__erSSID";window.console||(console={log:function(){},debug:function(){}}),ER.loadJS=new function(){var e="",t="",n="",r="";return{setData:function(i,o,a,u){e=i,t=o,n=a,r=u},mainProcess:function(){ER.lastView.saveLastViewItem(e,t),this._erUid=ER.erCookieObj.getLocalCookie(ERUID_COOKIE),ER.erTag.updateViewPath(e,t),ER.erTag.eventWrapper(e,t),ER.prevPage.eventWrapper(e,t),ER.uidFill.eventWrapper(e,t),ER.uidFill.eventWrapper(n,r),ER.pTuple.pTupleToJson(e,t);var i=365,o=function(i,o){var a=ER.eventObj;a.init(i,erUrlPrefix,e,t,o),a.submit();var u=ER.queryObj;u.init(i,erUrlPrefix,n,r),u.submit()},a=function(e){function t(){e()}function n(e,t){"loaded"===e.readyState||"complete"===e.readyState?t():setTimeout(function(){n(e,t)},100)}var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=erUrlPrefix+"json2.js";var i=document.body.lastElementChild;i||(i=document.body.children[document.body.children.length-1]),i.parentNode.insertBefore(r,i),r.addEventListener?r.addEventListener("load",t,!1):r.attachEvent&&n(r,t)},u=function(){var e=(CrxDomainStorage.init(erUrlPrefix,"srv.html?"+(new Date).getDate()),ER.erCookieObj.getLocalCookie(ERUID_COOKIE));CrxDomainStorage.requestValue(ERUID_COOKIE,e,function(e,t,n){ER.erCookieObj.setLocalCookie(ERUID_COOKIE,t,i),o(t,n)})};a(u)}}},ER.track=new function(){var e=function(e,t,n,r){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"undefined"!=typeof e?event_final=e:"undefined"!=typeof _qevent&&(event_final=_qevent),"undefined"!=typeof t&&(qeventList=t),"undefined"!=typeof n&&(qquery=n),"undefined"!=typeof r&&(qqueryList=r),ER.loadJS.setData(qeventList,event_final,qqueryList,qquery)};return{send:function(t,n,r,i){e(t,n,r,i),ER.loadJS.mainProcess()}}},function(){var e="",t=[],n="",r=[];String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"undefined"!=typeof _qevents?e=_qevents:"undefined"!=typeof _qevent&&(e=_qevent),"undefined"!=typeof _qeventList&&(t=_qeventList),"undefined"!=typeof _qquery&&(n=_qquery),"undefined"!=typeof _qqueryList&&(r=_qqueryList),ER.loadJS.setData(t,e,r,n),ER.loadJS.mainProcess()}();