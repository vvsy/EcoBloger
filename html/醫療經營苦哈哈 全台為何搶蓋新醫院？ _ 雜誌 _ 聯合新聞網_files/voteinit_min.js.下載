0==$("#actlog").length&&document.write('<a id="actlog" style="display:none"></a>');var temptype={bar1:!1,bar2:!1,pie1:!1},pieTemplateStatus=!1,countDownStatus=!1,highChartsStatus=!1;function piepkg(){}function popvf(a){$("#actlog").colorbox({scrolling:!1,iframe:!0,href:"/funchtml/activity/"+a.find(".vf").text()+".html?actCode="+a.find(".ac").text(),width:"660px",height:"520px",maxWidth:"95%",maxHeight:"95%",onClosed:function(){}}),$("#actlog").click()}var dataString="",objarea=null;function voteSubmint(){objarea.find(".vote_msg").html("正在處理中!!"),jQuery.ajax({type:"get",url:"/funcap/"+objarea.find(".sf").text()+".jsp",data:dataString,dataType:"script",error:function(a){objarea.find(".vote_msg").html("");var t=jQuery.parseJSON(a.responseText);"2100"==t.code?document.location="http://member.udn.com/member/login.jsp?site=news&redirect="+window.location:"2310"==t.code?popvf(objarea):"2320"==t.code?popvf(objarea):objarea.find(".vote_msg").html(t.msg)},success:function(){var actCode=objarea.find(".ac").text(),va=objarea.find(".va").text(),at=objarea.find(".at").text();eval(at+'view("'+va+'");');var random_hi=Math.floor(100*Math.random())*Math.floor(100*Math.random());$(".captcha_img").attr("src","/funcap/keyimg?rrr="+random_hi)}})}function loadTemplateJs(actTemplate){eval("temptype."+actTemplate)||eval("temptype."+actTemplate+"=true")}function randomCaptcha(){var a=Math.floor(100*Math.random())*Math.floor(100*Math.random());$(".captcha_img").attr("src","/funcap/keyimg?rrr="+a)}function getCountdown(){countDownStatus=!0,$.ajaxSetup({cache:!0}),$.getScript("/func/js/jquery.countdown.js",function(){$.ajaxSetup({cache:!1})})}function getHighcharts(){highChartsStatus=!0,$.ajaxSetup({cache:!0}),$.getScript("/func/js/highcharts.js",function(){$.ajaxSetup({cache:!1})})}$(document).ready(function(){$(".captcha_img").click(function(){var a=Math.floor(100*Math.random())*Math.floor(100*Math.random());$(".captcha_img").attr("src","/funcap/keyimg?rrr="+a)}),$("body").on("change",".vote_item",function(){var a=$(this).attr("id").substring(0,$(this).attr("id").lastIndexOf("_"));$("input[id^='"+a+"_']:checked").length>$(this).attr("maxlength")&&(this.checked=!1)}),$("body").on("click",".vote_name",function(){$(this).parents("label").prev().prop("checked",!0).trigger("change")}),$("body").on("click",".sendbtn",function(){objarea=$(this);var a="";this.getAttribute("password"),a=this.getAttribute("password"),objarea=objarea.parent(),a||(0==(objarea=objarea.parent()).find('input[type="radio"]').length&&0==objarea.find('input[type="checkbox"]').length&&(objarea=objarea.parent()),$.each(objarea.find('input[type="radio"]'),function(t,e){$(e).prop("checked")&&(a=$(e).val())}),null==a&&(a="",$.each(objarea.find('input[type="checkbox"]'),function(t,e){$(e).prop("checked")&&(a=""==a?$(e).val():a+"@"+$(e).val())}))),0==objarea.find(".vote_msg").length&&(objarea=objarea.parent()),objarea.find(".vote_msg").html("正在處理中!!");var t=objarea.find(".lc").text();if(a)if(a.split("@").length>parseInt(t))objarea.find(".vote_msg").html("投票數超過限制!!");else if(objarea.find(".captcha").val()&&0==objarea.find(".captcha").val().length)objarea.find(".vote_msg").html("請輸入驗證碼!!");else{var e=objarea.find(".ac").text();dataString="actCode="+e+"&choice="+a,0==objarea.find(".vote").data("topic")&&(dataString+="&setTopic=false"),objarea.find(".captcha").val()&&(dataString+="&captcha="+objarea.find(".captcha").val()),objarea.find(".vote_msg").html(""),voteSubmint()}else objarea.find(".vote_msg").html("請先點您呷意的選項!!")})});